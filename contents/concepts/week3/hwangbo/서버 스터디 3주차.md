# μ„λ²„ μ¤ν„°λ”” 3μ£Όμ°¨

### π€Β Controller Layerλ” λ¬΄μ—‡μΈκ°€μ”?

1. Controller Layerλ” μ–΄λ–¤ μ—­ν• μ„ ν•λ©°, μ–΄λ–¤ κµ¬μ΅°λ΅ μ΄λ£¨μ–΄μ Έ μλ‚μ”?

- controller layerλ” ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ°›μ€ μ”μ²­μ„ λ°›μ•„μ„, service layerμ— μ²λ¦¬λ¥Ό λ„κΈ΄ ν›„ μƒκΈ΄ μ‘λ‹µμ„ λ‹¤μ‹ ν΄λΌμ΄μ–ΈνΈμ—κ² λ°ν™ν•λ” μ—­ν• μ„ ν•λ‹¤.

- @RequestController vs @Controller : μ‘λ‹µ κ²°κ³Όλ¥Ό λ°μ΄ν„°λ΅ λ°ν™ν•λ”μ§€, viewλ΅ λ°ν™ν•λ”μ§€ μ—¬λ¶€μ— λ”°λΌ λ‹¤λ¥΄κ² μ‚¬μ©ν•λ‹¤.

- @RequestMapping(κ³µν†µμ μΈ url), Get, Post, Put, Patch, DeleteMapping λ“±μ μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄ http λ©”μ†λ“μ™€ url κ²½λ΅λ¥Ό λ§¤ν•‘ν•λ‹¤.

1. ResponseEntityλ” λ¬΄μ—‡μ΄λ©°, μ–΄λ–»κ² ν™μ©ν•  μ μλ‚μ”?
    - ResponseEntityλ” http μ‘λ‹µ μ „μ²΄λ¥Ό μ μ–΄ν•  μ μλ” κ°μ²΄λ‹¤. http μƒνƒ μ½”λ“, ν—¤λ”, bodyλ¥Ό λ¨λ‘ μ„¤μ •ν•  μ μλ‹¤.

- RequestEntityλ” ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ μ”μ²­μ ν—¤λ”, http λ©”μ†λ“, μ”μ²­ uri, λ³Έλ¬Έμ„ ν™•μΈν•  μ μκ² ν•΄μ¤€λ‹¤.

- ResponseEntity μ‚¬μ©μμ‹

```jsx
μ„±κ³µ μ‘λ‹µ: ResponseEntity.ok(data)

μ—λ¬ μ‘λ‹µ: ResponseEntity.status(HttpStatus.NOT_FOUND).body(errorMessage)
```

### π€Β Service Layerλ” λ¬΄μ—‡μΈκ°€μ”?

1. Service Layerλ” μ–΄λ–¤ μ—­ν• μ„ ν•λ©°, μ–΄λ–¤ κµ¬μ΅°λ΅ μ΄λ£¨μ–΄μ Έ μλ‚μ”?

- Service Layerλ” λΉ„μ¦λ‹μ¤ λ΅μ§μ„ λ‹΄λ‹Ήν•λ” κ³„μΈµμ΄λ‹¤. Controllerμ—κ² λ°›μ€ μ”μ²­μ„ μ²λ¦¬(λΉ„μ¦λ‹μ¤ λ΅μ§ μν–‰)ν•κ³  κ²°κ³Όλ¥Ό λ°ν™ν•λ‹¤.

### π€Β Springμ—μ„ μ”μ²­μ„ μ–΄λ–¤ λ°©μ‹μΌλ΅ μ²λ¦¬ν•λ‚μ”?

1. μ”μ²­κ³Ό μ‘λ‹µμ΄λ€ λ¬΄μ—‡μΈκ°€μ”?
    - ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—κ² λ³΄λ‚΄λ” λ°μ΄ν„°λ¥Ό μ”μ²­, μ„λ²„κ°€ μ”μ²­μ„ μ²λ¦¬ν• ν›„ ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚Ό λ°μ΄ν„°λ¥Ό μ‘λ‹µμ΄λΌκ³  ν•λ‹¤.
    
    1. μ”μ²­κ³Ό μ‘λ‹µμ—λ” μ–΄λ–¤ κ°’μ΄ λ‹΄κΈ°λ‚μ”?
        - μ”μ²­: HTTP λ©”μ†λ“, μ”μ²­ κ²½λ΅ λλ” μΏΌλ¦¬ νλΌλ―Έν„°, μ”μ²­ ν—¤λ”, μ”μ²­ body λ“±
        
        - μ‘λ‹µ: HTTP μƒνƒ μ½”λ“, μ‘λ‹µ ν—¤λ”, μ‘λ‹µ body λ“±

1. Springμ—μ„ μ”μ²­μ„ μ–΄λ–»κ² μ²λ¦¬ν•λ‚μ”?
    1. **μ¤ν”„λ§μ—μ„ κ°μ²΄μ μ§λ ¬ν™”μ™€ μ—­μ§λ ¬ν™”λ” μ–΄λ–»κ² μ΄λ¤„μ§κΉμ”?**
    
    - μ§λ ¬ν™”λ” μλ°” κ°μ²΄ β†’ JSONκ³Ό κ°™μ€ ν…μ¤νΈ ν•μ‹μΌλ΅ λ³€ν™ν•λ” κ²ƒμ΄λ‹¤. μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ‘λ‹µμ„ μƒμ„±ν•  λ• μ‚¬μ©λλ‹¤.
    
    - μ—­μ§λ ¬ν™”λ” JSONκ°™μ€ ν…μ¤νΈ ν•μ‹ β†’ μλ°” κ°μ²΄λ΅ λ³€ν™ν•λ” κ²ƒμ΄λ‹¤. ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ μ”μ²­μ„ ν•  λ• μ‚¬μ©λλ‹¤.
        
        
    - @RequestBodyλ” http μ”μ²­ bodyμ— λ‹΄μ•„ λ³΄λ‚Έ JSON/XML λ“±μ„ μλ°” κ°μ²΄λ΅ μ—­μ§λ ¬ν™”ν•΄ λ§¤ν•‘ν•΄μ£Όλ” μ–΄λ…Έν…μ΄μ…μ„. μ”μ²­μ Body λ‚΄μ©μ„ DTOλ‚ Entityμ— μλ™μΌλ΅ λ§¤ν•‘ν•΄μ¤.
    
    ```jsx
    
    // JSON
    {
      "username": "eunjun",
      "password": "1234"
    }
    
    // μ»¨νΈλ΅¤λ¬ μ½”λ“, JSON -> DTO μ—­μ§λ ¬ν™”
    @PostMapping("/login")
    public ResponseEntity<String> login(@RequestBody LoginDto dto) {
        return ResponseEntity.ok("Hello, " + dto.getUsername());
    }
    ```
    
    - `HttpMessageConverter` β†’ `MappingJackson2HttpMessageConverter` β†’ `ObjectMapper`
    
    - @ResponseBodyλ” μλ°” κ°μ²΄λ¥Ό http μ‘λ‹µ bodyμ— λ‹΄μ•„ JSON λ“±μΌλ΅ μ§λ ¬ν™” ν›„ ν΄λΌμ΄μ–ΈνΈμ—κ² μ „λ‹¬ν•λ” μ–΄λ…Έν…μ΄μ…μ„. @RestControllerμ— μ΄ μ–΄λ…Έν…μ΄μ…μ΄ ν¬ν•¨λμ–΄ μμ.
    
    ```jsx
    
    //μ»¨νΈλ΅¤λ¬ μ½”λ“
    @GetMapping("/user")
    @ResponseBody
    public UserDto getUser() {
        return new UserDto(1L, "eunjun", "user");
    }
    
    // DTO -> JSON
    {
      "id": 1,
      "name": "eunjun",
      "role": "user"
    }
    
    ```
    
    - `HttpMessageConverter` β†’ `ObjectMapper`λ¥Ό μ‚¬μ©ν•΄ Java κ°μ²΄λ¥Ό JSONμΌλ΅ λ³€ν™
    
    **b.   ObjectMapperμ μ‘λ™λ°©μ‹**
    
    - ObjectMapperλ” Jackson λΌμ΄λΈλ¬λ¦¬μ—μ„ μ κ³µν•λ” ν΄λμ¤λ‹¤. μ—­μ§λ ¬ν™”μ™€ μ§λ ¬ν™”λ¥Ό μν–‰ν•λ‹¤.

1. @RequestBodyκ³Ό @ModelAttributeλ” μ–΄λ–¤ μ°¨μ΄κ°€ μμΌλ©° μ–Έμ  μ‚¬μ©ν•΄μ•Ό ν• κΉμ”?
    - RequestBodyλ” μ”μ²­ bodyμ— μλ” JSON λ°μ΄ν„°λ¥Ό μλ°” κ°μ²΄λ΅ μ—­μ§λ ¬ν™”ν•κ³ , ModelAttributeλ” μ”μ²­ μΏΌλ¦¬ νλΌλ―Έν„°, νΌ λ°μ΄ν„°λ¥Ό μλ°” κ°μ²΄λ΅ λ³€ν™ν•λ‹¤.
    
    - RequestBodyλ” μ£Όλ΅ POST, PUT, PATCH λ©”μ†λ“μ—μ„ μ‚¬μ©ν•λ‹¤. ν΄λΌμ΄μ–ΈνΈκ°€ JSON ν•μ‹μΌλ΅ μ”μ²­μ„ λ³΄λ‚΄λ” κ²½μ°μ— μ ν•©ν•λ‹¤.
    
    - ModelAttributeλ” μ£Όλ΅ GET μ”μ²­, λΈλΌμ°μ €μ μ£Όμ†μ°½ λλ” <form> νƒκ·Έλ΅ λ³΄λ‚Έ λ°μ΄ν„°μ— μ ν•©ν•λ‹¤.

1. @PathVariableμ™€ @RequestParamμ€ μ–΄λ–¤ μ°¨μ΄κ°€ μμΌλ©° μ–Έμ  μ‚¬μ©ν•΄μ•Ό ν• κΉμ”?
    - @PathVariableμ€ URL κ²½λ΅μ— λ°μ΄ν„°λ¥Ό ν¬ν•¨ν•κ³ , @RequestParamμ€ μΏΌλ¦¬ νλΌλ―Έν„°μ— λ°μ΄ν„°λ¥Ό ν¬ν•¨ν•λ‹¤. μΏΌλ¦¬ νλΌλ―Έν„°λ” URL λ’¤μ— λ¶™λ” μ¶”κ°€ μ •λ³΄λ¥Ό μλ―Έν•λ©°, κ²€μƒ‰ μ΅°κ±΄, νμ΄μ§€ λ²νΈ, ν•„ν„° μµμ… λ“±μ„ μ„λ²„μ— μ „λ‹¬ν•  λ• μ‚¬μ©ν•λ‹¤.
    
    ```jsx
    // @PathVariable μμ‹, /users/5
    @GetMapping("/users/{id}")
    public ResponseEntity<?> getUser(@PathVariable Long id) {
        return ResponseEntity.ok(userService.find(id));
    }
    
    // RequestParam μμ‹, /search?keyword=spring&page=2
    @GetMapping("/search")
    public ResponseEntity<?> search(@RequestParam String keyword, @RequestParam(defaultValue = "1") int page) {
        return ResponseEntity.ok(searchService.search(keyword, page));
    }
    ```
    

### π€Β λ°μ΄ν„° μ „λ‹¬ κ°μ²΄λ€ λ¬΄μ—‡μΈκ°€μ”? κ·Έλ¦¬κ³  Transactionμ€ λ¬΄μ—‡μΈκ°€μ”?

1. Springμ—μ„ λ°μ΄ν„° μ „λ‹¬ κ°μ²΄λ΅ λ¬΄μ—‡μ΄ μλ‚μ”?
    1. λ°μ΄ν„° μ „λ‹¬ κ°μ²΄λ¥Ό μ™ μ‚¬μ©ν•λ‚μ”?
        - μ—”ν‹°ν‹°λ¥Ό κ·Έλ€λ΅ μ „λ‹¬ν•λ©΄ DBμ— μλ” λ―Όκ°ν• μ •λ³΄κΉμ§€ λ“λ¬λ‚  μ μλ‹¤. λ³΄μ•κ³Ό μ„¤κ³„μ μΈ μΈ΅λ©΄μ—μ„ λ°μ΄ν„° μ „λ‹¬ κ°μ²΄λ¥Ό λ”°λ΅ λ‘λ”κ² μ΄μ μ΄ λ§λ‹¤.
        
        - μ—”ν‹°ν‹°λ” DBμ— λ§κ², λ°μ΄ν„° μ „λ‹¬ κ°μ²΄λ” ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ— λ§κ² μ„¤κ³„ν•¨μΌλ΅ APIλ¥Ό κΉ”λ”ν•κ² μ μ§€ν•κ³ , κ³„μΈµλ³„ λ¶„λ¦¬λ¥Ό ν™•μ‹¤ν•κ² ν•  μ μλ‹¤.
        
    2. DAO, DTO, VOλ” κ°κ° λ¬΄μ—‡μ΄λ©°, μ–΄λ–¤ μ°¨μ΄μ μ΄ μλ‚μ”?
        - DAO(Data Access Object)λ” DBμ λ°μ΄ν„°μ— μ ‘κ·Όν•κΈ° μ„ν• κ°μ²΄λ¥Ό μλ―Έν•λ‹¤. λ³΄ν†µμ€ Repositoryλ΅ λ€μ²΄λλ‹¤.
        
        - DTO(Data Transfer Object)λ” κ³„μΈµκ°„ λ°μ΄ν„° κµν™μ„ μ„ν• κ°μ²΄λ¥Ό μλ―Έν•λ‹¤. λ΅μ§μ„ κ°€μ§€μ§€ μ•λ” κ°μ²΄κ³ , ν΄λΌμ΄μ–ΈνΈμ—κ² λ…Έμ¶ν•  λ°μ΄ν„°λ§ μ„ νƒν•΄μ„ μ „λ‹¬ κ°€λ¥ν•λ„λ΅ ν•λ‹¤.
        
        - VO(Value Object)λ” λΉ„μ¦λ‹μ¤μ μΌλ΅ μλ―Έμλ” κ°’ νƒ€μ…μ„ ν‘ν„ν•κΈ° μ„ν•΄ λ¶λ³€ ν΄λμ¤λ¥Ό λ§λ“¤μ–΄ μ‚¬μ©ν•λ” κ°μ²΄λ‹¤. equalsμ™€ hashcodeμ μ¬μ •μκ°€ ν•„μ”ν•λ‹¤.
        
2. **Transactionμ€ λ¬΄μ—‡μΈκ°€μ”?**
    1. ACID μ›μΉ™μ€ λ¬΄μ—‡μΈκ°€μ”?
        - νΈλμ­μ…μ΄λ€ λ°μ΄ν„°λ² μ΄μ¤μ—μ„ ν•λ‚μ μ‘μ—…λ‹¨μ„λ¥Ό μλ―Έν•λ‹¤. μ—¬λ¬ μ‘μ—…μ΄ λ¨λ‘ μ„±κ³µν•κ±°λ‚, λλ” λ¨λ‘ μ‹¤ν¨ν•΄μ•Όν•λ‹¤λ” κ²ƒμ΄λ‹¤.
        
        - A(Atomicity) - λ¨λ‘ μ„±κ³µ / λ¨λ‘ μ‹¤ν¨ν•΄μ•Ό ν•¨
        - C(Consistency) - νΈλμ­μ… μ „ ν›„ μƒνƒκ°€ ν•­μƒ μΌκ΄€λΌμ•Ό ν•¨
        - I(Isolation) - λ™μ‹μ— μ‹¤ν–‰λλ” νΈλμ­μ… κ°„ κ°„μ„­μ΄ μ—†μ–΄μ•Ό ν•¨
        - D(Durability) - μ»¤λ°‹λ λ°μ΄ν„°λ” μκµ¬μ μΌλ΅ λ°μλμ–΄μ•Ό ν•¨
        
    2. Springμ—μ„λ” Transactionμ„ μ–΄λ–¤ λ°©μ‹μΌλ΅ κ΄€λ¦¬ν•λ‚μ”?(**@Transcational**)
    
    - @Transactional μ–΄λ…Έν…μ΄μ…μ„ μ΄μ©ν•΄ νΈλμ­μ…μ„ κ΄€λ¦¬ν•λ‹¤. λ©”μ†λ“ μ •μƒ μΆ…λ£μ‹ μ»¤λ°‹ν•κ³ , μμ™Έκ°€ λ°μƒν•  λ• λ΅¤λ°±ν•λ„λ΅ ν•λ‹¤.